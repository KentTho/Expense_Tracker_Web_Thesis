ğŸ“ Ghi chÃº dá»± Ã¡n: Flutter + FastAPI + PostgreSQL


C:\Program Files\Java\jdk-21

 SHA1: 4D:BB:7F:73:CF:7A:D7:8C:1A:C3:B6:A4:51:A2:CF:D2:1B:70:DC:D3
SHA256: 4E:B6:57:F2:66:89:D5:66:91:C7:2B:79:C5:B7:36:CE:FF:F1:BD:EE:C2:EC:E4:85:15:DD:90:C8:13:28:E7:75


 âš™ï¸ Frontend (Flutter)
âœ… CÃ¡c lá»‡nh cÆ¡ báº£n

 Khá»Ÿi cháº¡y dá»± Ã¡n:

  bash
  flutter run
  

 Cháº¡y trÃªn thiáº¿t bá»‹ cá»¥ thá»ƒ (VD: Emulator):

  bash
  flutter run -d emulator-5554
  

 Má»Ÿ trÃ¬nh giáº£ láº­p cá»¥ thá»ƒ (VD: Pixel 6 Pro):

  bash
  flutter emulators --launch Pixel_6_Pro
  

 Cháº¡y láº¡i code sau khi cáº­p nháº­t (trong terminal Flutter):

   Nháº¥n r: Hot reload (reset nhanh khÃ´ng máº¥t tráº¡ng thÃ¡i).
   Nháº¥n R: Hot restart (khá»Ÿi Ä‘á»™ng láº¡i toÃ n bá»™ app).

---

 ğŸ–¥ Backend (FastAPI + Python)

 âœ… Thiáº¿t láº­p mÃ´i trÆ°á»ng áº£o Python

 KÃ­ch hoáº¡t mÃ´i trÆ°á»ng áº£o:

  bash
  .\venv-ai\Scripts\activate
  

 ThoÃ¡t khá»i mÃ´i trÆ°á»ng áº£o:

  bash
  deactivate
  

âœ… Cháº¡y server FastAPI vá»›i Uvicorn

bash

uvicorn main:app --reload --port 8000


python -m uvicorn src.main:app --reload   => C:\Users\Tho\.cache\huggingface\hub

Cáº­p nháº­t vÃ o requirements.txt Ä‘á»ƒ lÆ°u láº¡i

pip freeze > requirements.txt

CÃ i láº¡i cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t

pip install -r requirements.txt


âœ… BÆ°á»›c 2: Kiá»ƒm tra láº¡i xem cÃ²n khÃ´ng
Cháº¡y láº¡i lá»‡nh sau Ä‘á»ƒ kiá»ƒm tra:

netstat -ano | findstr :8000
âœ… Náº¿u khÃ´ng tháº¥y gÃ¬ => nghÄ©a lÃ  uvicorn Ä‘Ã£ Ä‘Æ°á»£c dá»«ng thÃ nh cÃ´ng.

Náº¿u váº«n cÃ²n hiá»‡n ra PID cÅ© thÃ¬ báº¡n hÃ£y thá»­:


taskkill /IM python.exe /F
âš ï¸ Cáº£nh bÃ¡o: Lá»‡nh trÃªn sáº½ dá»«ng táº¥t cáº£ tiáº¿n trÃ¬nh Python Ä‘ang cháº¡y (chá»‰ dÃ¹ng náº¿u báº¡n khÃ´ng cÃ³ process Python quan trá»ng Ä‘ang cháº¡y khÃ¡c).






> ğŸ”— Giao diá»‡n tÃ i liá»‡u API (Swagger UI):
> [http://127.0.0.1:8000/docs/](http://127.0.0.1:8000/docs/)

---

 ğŸ—ƒï¸ Database (PostgreSQL)

 âœ… Káº¿t ná»‘i tá»›i PostgreSQL báº±ng CMD

bash
psql -U admin -h localhost -d postgres


 Chuyá»ƒn sang database chÃ­nh:

  sql
  \c mental_health_app
  

 Xem danh sÃ¡ch báº£ng:

  sql
  \dt
  

 Xem cáº¥u trÃºc báº£ng cá»¥ thá»ƒ (VD: users):

  sql
  \d users
  

---

 âœ… Truy váº¥n dá»¯ liá»‡u

 XÃ¡c nháº­n dá»¯ liá»‡u trong báº£ng:

  sql
  SELECT COUNT() FROM user_profiles;
  

 Hiá»ƒn thá»‹ thÃ´ng tin ngáº¯n gá»n:

  sql
  SELECT id, full_name, user_id FROM user_profiles;
  

---

 ğŸ” Xá»­ lÃ½ lá»—i mÃ£ hÃ³a kÃ½ tá»± (Unicode/UTF8)

 âœ³ï¸ CÃ¡ch 1: Cáº¥u hÃ¬nh sau khi Ä‘Äƒng nháº­p vÃ o psql

sql
SET client_encoding = 'UTF8';


Rá»“i cháº¡y láº¡i cÃ¢u lá»‡nh:

sql
SELECT  FROM users WHERE firebase_uid = 'Ct9lxHivV9eOTwyza6ZrkReNH7v2';


---

 âœ³ï¸ CÃ¡ch 2: Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng trÆ°á»›c khi vÃ o psql

bash
set PGCLIENTENCODING=utf8
psql -U admin -d mental_health_app


---

 ğŸ’¡ VÃ¬ sao cÃ³ lá»—i nÃ y?

 Báº£ng chá»©a kÃ½ tá»± Unicode (Tiáº¿ng Viá»‡t) nhÆ° â€œá»‡â€, â€œÄ‘â€, â€œá»â€,...
 Terminal Windows máº·c Ä‘á»‹nh dÃ¹ng mÃ£ hÃ³a WIN1252 gÃ¢y lá»—i khi khÃ´ng trÃ¹ng vá»›i UTF8.

---

 ğŸ‘¥ Giao diá»‡n Ä‘Äƒng kÃ½ / Ä‘Äƒng nháº­p

Link tham kháº£o giao diá»‡n:
ğŸ”— [ChatGPT Share Link](https://chatgpt.com/share/685bfd36-d014-8010-bdd8-86db07450109)

---

 ğŸ§ª Gá»£i Ã½ tiáº¿p theo

 Test API /user/firebase Ä‘á»ƒ lÆ°u ngÆ°á»i dÃ¹ng má»›i sau khi xÃ¡c thá»±c Firebase.
 ThÃªm hÆ°á»›ng dáº«n insert dá»¯ liá»‡u test náº¿u cáº§n (cÃ³ thá»ƒ bá»• sung sau tÃ¹y má»¥c tiÃªu dá»± Ã¡n).

---

Náº¿u báº¡n muá»‘n mÃ¬nh chuyá»ƒn thÃ nh file PDF, markdown, hoáº·c táº¡o checklist cÃ´ng viá»‡c (task checklist), cá»© nÃ³i nhÃ©.

